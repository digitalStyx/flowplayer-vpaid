(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function t(e,i,n){function o(s,c){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var i=e[s][1][t];return o(i?i:t)},d,d.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){},{}],2:[function(t,e,i){"use strict";function n(t,e,i){}function o(t,e,i){Object.defineProperty(t,e,{writable:!1,configurable:!1,value:i})}var r=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],s=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],c=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],a=["setAdVolume"];n.prototype.handshakeVersion=function(t,e){},n.prototype.initAd=function(t,e,i,n,o,r,s){},n.prototype.startAd=function(t){},n.prototype.stopAd=function(t){},n.prototype.skipAd=function(t){},n.prototype.resizeAd=function(t,e,i,n){},n.prototype.pauseAd=function(t){},n.prototype.resumeAd=function(t){},n.prototype.expandAd=function(t){},n.prototype.collapseAd=function(t){},n.prototype.subscribe=function(t,e,i){},n.prototype.unsubscribe=function(t,e){},n.prototype.getAdLinear=function(t){},n.prototype.getAdWidth=function(t){},n.prototype.getAdHeight=function(t){},n.prototype.getAdExpanded=function(t){},n.prototype.getAdSkippableState=function(t){},n.prototype.getAdRemainingTime=function(t){},n.prototype.getAdDuration=function(t){},n.prototype.getAdVolume=function(t){},n.prototype.getAdCompanions=function(t){},n.prototype.getAdIcons=function(t){},n.prototype.setAdVolume=function(t,e){},o(n,"METHODS",r),o(n,"GETTERS",c),o(n,"SETTERS",a),o(n,"EVENTS",s);var u=r.filter(function(t){return-1===["skipAd"].indexOf(t)});o(n,"checkVPAIDInterface",function(t){var e=u.every(function(e){return"function"==typeof t[e]});return e}),e.exports=n},{}],3:[function(t,e,i){"use strict";function n(t,e,i,n){this._isValid=d(t),this._isValid&&(this._creative=t,this._el=e,this._videoEl=i,this._iframe=n,this._subscribers=new u,o.call(this))}function o(){if(h.forEach(function(t){this._creative.subscribe(s.bind(this,t),t)}.bind(this)),this._creative.subscribe(r.bind(this),f),this._videoEl){var t=this._iframe.contentDocument.documentElement,e=this._videoEl;t.addEventListener("click",function(i){i.target===t&&e.click()})}}function r(t,e,i){this._subscribers.triggerSync(f,{url:t,id:e,playerHandles:i})}function s(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}function c(t,e,i,n){t?t(i,n):i&&e.trigger(l,i)}var a=t("./IVPAIDAdUnit"),u=t("./subscriber"),d=a.checkVPAIDInterface,p=t("./utils"),l=(a.METHODS,"AdError"),f="AdClickThru",h=a.EVENTS.filter(function(t){return t!=f});n.prototype=Object.create(a.prototype),n.prototype.isValidVPAIDAd=function(){return this._isValid},a.METHODS.forEach(function(t){var e=["subscribe","unsubscribe","initAd"];-1===e.indexOf(t)&&(n.prototype[t]=function(){var e=a.prototype[t].length,i=Array.prototype.slice.call(arguments),n=e===i.length?i.pop():void 0;setTimeout(function(){var e,o=null;try{e=this._creative[t].apply(this._creative,i)}catch(r){o=r}c(n,this._subscribers,o,e)}.bind(this),0)})}),n.prototype.initAd=function(t,e,i,n,o,r,s){o=o||{},r=p.extend({slot:this._el,videoSlot:this._videoEl},r||{}),setTimeout(function(){var a;try{this._creative.initAd(t,e,i,n,o,r)}catch(u){a=u}c(s,this._subscribers,a)}.bind(this),0)},n.prototype.subscribe=function(t,e,i){this._subscribers.subscribe(e,t,i)},n.prototype.unsubscribe=function(t,e){this._subscribers.unsubscribe(e,t)},n.prototype.on=n.prototype.subscribe,n.prototype.off=n.prototype.unsubscribe,a.GETTERS.forEach(function(t){n.prototype[t]=function(e){setTimeout(function(){var i,n=null;try{i=this._creative[t]()}catch(o){n=o}c(e,this._subscribers,n,i)}.bind(this),0)}}),n.prototype.setAdVolume=function(t,e){setTimeout(function(){var i,n=null;try{this._creative.setAdVolume(t),i=this._creative.getAdVolume()}catch(o){n=o}n||(n=p.validate(i===t,"failed to apply volume: "+t)),c(e,this._subscribers,n,i)}.bind(this),0)},n.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},e.exports=n},{"./IVPAIDAdUnit":2,"./subscriber":5,"./utils":6}],4:[function(t,e,i){(function(i){"use strict";function n(t,e,i,n){i=i||{},this._id=l(),this._destroyed=!1,this._frameContainer=p.createElementInEl(t,"div"),this._videoEl=e,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||h,extraOptions:i.extraOptions||{}}}function o(t){var e=this[t];e&&(e.remove(),delete this[t])}function r(){c.call(this),delete this._adUnit}function s(){c.call(this),u.call(this)}function c(){o.call(this,"_frame"),a.call(this)}function a(){this._onLoad&&(window.removeEventListener("message",this._onLoad),p.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function u(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function d(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}var p=t("./utils"),l=p.unique("vpaidIframe"),f=t("./VPAIDAdUnit"),h='<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n</head>\n<body>\n    <script type="text/javascript" src="{{iframeURL_JS}}"></script>\n    <script>\n        parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', window.location.origin);\n    </script>\n    <div class="ad-element">\n    </div>\n</body>\n</html>\n',A="AdStopped";n.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,s.call(this))},n.prototype.isDestroyed=function(){return this._destroyed},n.prototype.loadAdUnit=function(t,e){function i(t){if(t.origin===window.location.origin){var i=JSON.parse(t.data);if(i.id===this.getID()){var n,o,s;if(this._frame.contentWindow?(s=this._frame.contentWindow.getVPAIDAd,o=p.validate("function"==typeof s,"the ad didn't return a function to create an ad")):o="the iframe is not anymore in the DOM tree",!o){var c=this._frame.contentWindow.document.querySelector(".ad-element");n=new f(s(),c,this._videoEl,this._frame),n.subscribe(A,r.bind(this)),o=p.validate(n.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return this._adUnit=n,a.call(this),e(o,o?null:n),!0}}}function n(){e("timeout",null)}d.call(this),s.call(this);var o=p.createIframeWithContent(this._frameContainer,this._templateConfig.template,p.extend({iframeURL_JS:t,iframeID:this.getID()},this._templateConfig.extraOptions));this._frame=o,this._onLoad=p.callbackTimeout(this._vpaidOptions.timeout,i.bind(this),n.bind(this)),window.addEventListener("message",this._onLoad)},n.prototype.unloadAdUnit=function(){s.call(this)},n.prototype.getID=function(){return this._id},e.exports=n,window.VPAIDHTML5Client=n}).call(this,"/node_modules/vpaid-html5-client/js")},{"./VPAIDAdUnit":3,"./utils":6,fs:1}],5:[function(t,e,i){"use strict";function n(){this._subscribers={}}n.prototype.subscribe=function(t,e,i){this.get(e).push({handler:t,context:i})},n.prototype.unsubscribe=function(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t===e.handler})},n.prototype.unsubscribeAll=function(){this._subscribers={}},n.prototype.trigger=function(t,e){var i=this;i.get(t).forEach(function(n){setTimeout(function(){i.get(t)&&n.handler.call(n.context,e)},0)})},n.prototype.triggerSync=function(t,e){this.get(t).forEach(function(t){t.handler.call(t.context,e)})},n.prototype.get=function(t){return this._subscribers[t]||(this._subscribers[t]=[]),this._subscribers[t]},e.exports=n},{}],6:[function(t,e,i){"use strict";function n(){}function o(t,e){return t?null:new Error(e)}function r(t){var e=h[t];e&&(clearTimeout(e),delete h[t])}function s(t,e,i){var o,s;return s=setTimeout(function(){e=n,delete s[o],i()},t),o=function(){e.apply(this,arguments)&&r(o)},h[o]=s,o}function c(t,e,i){var n=document.createElement(e);return i&&(n.id=i),t.appendChild(n),n}function a(t,e,i){var n=u(t);if(p(n,d(e,i)))return n}function u(t,e){var i=document.createElement("iframe");return i.src=e||"about:blank",i.width="100%",i.height="100%",i.style.position="absolute",i.style.left="0",i.style.top="0",t.innerHTML="",t.appendChild(i),i}function d(t,e){return Object.keys(e).forEach(function(i){var n="object"==typeof n?JSON.stringify(e[i]):e[i];t=t.replace(new RegExp("{{"+i+"}}","g"),n)}),t}function p(t,e){var i=t.contentWindow&&t.contentWindow.document;return i?(i.write(e),!0):!1}function l(t,e){return Object.keys(e).forEach(function(i){t[i]=e[i]}),t}function f(t){var e=-1;return function(){return t+"_"+ ++e}}var h={};e.exports={noop:n,validate:o,clearCallbackTimeout:r,callbackTimeout:s,createElementInEl:c,createIframeWithContent:a,createIframe:u,simpleTemplate:d,setIframeContent:p,extend:l,unique:f}},{}],7:[function(t,e,i){var n=t("vpaid-html5-client/js/VPAIDHTML5Client.js");e.exports={attach:function(t,e){var i=!1,o=null;e.on("vpaid_js",function(t,e){o=e}),e.on("resume",function(){o&&!i&&(e.stop(),i=!0,new n(t,null,{}).loadAdUnit(o.src,function(i,n){if(i)return e.play();var r=null,s={AdVideoStart:"start",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdUserAcceptInvitation:"acceptInvitation",AdUserMinimize:"collapse",AdUserClose:"close",AdPaused:"pause",AdPlaying:"resume",AdStopped:function(){e.play()},AdLoaded:function(){n.startAd()},AdStarted:function(){o.tracker.load(),n.getAdVolume(function(t,e){r=e})},AdSkipped:function(){o.tracker.skip(),e.play()},AdImpression:function(){},AdVolumeChange:function(){n.getAdVolume(function(t,e){0==e&&r>0?o.tracker.setMuted(!0):e>0&&0==r&&o.tracker.setMuted(!1)})},AdClickThru:function(){},AdError:function(){o.tracker.errorWithCode(901)}};Object.keys(s).forEach(function(t){return n.subscribe(t,function(){var e=s[t];return"string"==typeof e?o.tracker.track(e):void e(arguments)})}),n.handshakeVersion("2.0",function(i){return i?e.play():void n.initAd(t.offsetWidth,t.offsetHeight,"normal",-1,{AdParameters:o.parameters},{})})}))})}}},{"vpaid-html5-client/js/VPAIDHTML5Client.js":4}]},{},[7]);
},{}]},{},[1]);
